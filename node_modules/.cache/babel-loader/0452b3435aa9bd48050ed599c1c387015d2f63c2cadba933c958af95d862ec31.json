{"ast":null,"code":"import { API } from '../axios-api';\nimport Navbar from '../components/Navbar.vue';\nimport { useVuelidate } from '@vuelidate/core';\nimport { required, email, sameAs } from '@vuelidate/validators';\nexport default {\n  name: 'Register',\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data() {\n    return {\n      last_name: \"\",\n      first_name: \"\",\n      username: \"\",\n      email: \"\",\n      password1: \"\",\n      password2: \"\"\n    };\n  },\n  validations() {\n    return {\n      username: {\n        required\n      },\n      email: {\n        required,\n        email\n      },\n      password2: sameAs(this.password1)\n    };\n  },\n  components: {\n    Navbar\n  },\n  methods: {\n    validate() {\n      const isFormCorrect = this.v$.$validate();\n      if (!isFormCorrect) {\n        this.reg();\n      }\n    },\n    reg() {\n      API.post('/register/', {\n        last_name: this.last_name,\n        first_name: this.first_name,\n        username: this.username,\n        email: this.email,\n        password: this.password1\n      }).then(response => {\n        console.log('Registration successful');\n        console.log(response.data);\n        this.$store.dispatch('userLogin', {\n          username: this.username,\n          password: this.password1\n        }).then(() => {\n          this.$router.go(-2);\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["API","Navbar","useVuelidate","required","email","sameAs","name","setup","v$","data","last_name","first_name","username","password1","password2","validations","components","methods","validate","isFormCorrect","$validate","reg","post","password","then","response","console","log","$store","dispatch","$router","go","catch","err"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/views/Register.vue"],"sourcesContent":["<template>\n    <Navbar></Navbar>\n    <form class=\"w-50 mx-auto my-5 row needs-validation\" @submit.prevent=\"validate()\">\n        <div class=\"mb-3 col-6\">\n            <label for=\"InputSurname\" class=\"form-label\">Фамилия</label>\n            <input type=\"text\" class=\"form-control\" id=\"InputSurname\" v-model=\"last_name\">\n        </div>\n        <div class=\"mb-3 col-6\">\n            <label for=\"InputName\" class=\"form-label\">Имя</label>\n            <input type=\"text\" class=\"form-control\" id=\"InputName\" v-model=\"first_name\">\n        </div>\n        <div class=\"mb-3 col-6\">\n            <label for=\"InputUsername\" class=\"form-label\">Логин</label>\n            <input type=\"text\" class=\"form-control\" id=\"InputUsername\" v-model=\"username\">\n            <div class=\"invalid-feedback\" v-if=\"v$.username.$error\">\n                Это обязательное поле\n            </div>\n        </div>\n        <div class=\"mb-3 col-6\">\n            <label for=\"InputEmail\" class=\"form-label\">Email</label>\n            <input type=\"email\" class=\"form-control\" id=\"InputEmail\" v-model=\"email\">\n            <div class=\"invalid-feedback\" v-if=\"v$.email.$error\">\n                Введите действительный e-mail\n            </div>\n        </div>\n        <div class=\"mb-3 col-6\">\n            <label for=\"InputPassword1\" class=\"form-label\">Пароль</label>\n            <input type=\"password\" class=\"form-control\" id=\"InputPassword1\" v-model=\"password1\">\n        </div>\n        <div class=\"mb-3 col-6\">\n            <label for=\"InputPassword2\" class=\"form-label\">Повторите пароль</label>\n            <input type=\"password\" class=\"form-control\" id=\"InputPassword2\" v-model=\"password2\">\n            <div class=\"invalid-feedback\" v-if=\"v$.password2.$error\">\n                Пароли должны совпадать\n            </div>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary w-75 mx-auto\">Зарегистрироваться</button>\n    </form>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport Navbar from '../components/Navbar.vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required, email, sameAs } from '@vuelidate/validators'\n\nexport default {\n    name: 'Register',\n    setup() {\n        return {\n            v$: useVuelidate()\n        }\n    },\n    data() {\n        return {\n            last_name: \"\",\n            first_name: \"\",\n            username: \"\",\n            email: \"\",\n            password1: \"\",\n            password2: \"\",\n        }\n    },\n    validations() {\n        return {\n            username: { required },\n            email: { required, email },\n            password2: sameAs(this.password1)\n        }\n    },\n    components: {\n        Navbar,\n    },\n    methods: {\n        validate() {\n            const isFormCorrect = this.v$.$validate()\n            if (!isFormCorrect) {\n                this.reg()\n            }\n        },\n        reg() {\n            API.post('/register/', { \n                last_name: this.last_name, \n                first_name: this.first_name, \n                username: this.username, \n                email: this.email, \n                password: this.password1\n            }).then(response => {\n                console.log('Registration successful')\n                console.log(response.data)\n\n                this.$store.dispatch('userLogin', {\n                    username: this.username,\n                    password: this.password1\n                }).then(() => {\n                    this.$router.go(-2)\n                })\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":"AAyCA,SAASA,GAAE,QAAS,cAAa;AACjC,OAAOC,MAAK,MAAO,0BAAyB;AAC5C,SAASC,YAAW,QAAS,iBAAgB;AAC7C,SAASC,QAAQ,EAAEC,KAAK,EAAEC,MAAK,QAAS,uBAAsB;AAE9D,eAAe;EACXC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACJ,OAAO;MACHC,EAAE,EAAEN,YAAY;IACpB;EACJ,CAAC;EACDO,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE,EAAE;MACZR,KAAK,EAAE,EAAE;MACTS,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE;IACf;EACJ,CAAC;EACDC,WAAWA,CAAA,EAAG;IACV,OAAO;MACHH,QAAQ,EAAE;QAAET;MAAS,CAAC;MACtBC,KAAK,EAAE;QAAED,QAAQ;QAAEC;MAAM,CAAC;MAC1BU,SAAS,EAAET,MAAM,CAAC,IAAI,CAACQ,SAAS;IACpC;EACJ,CAAC;EACDG,UAAU,EAAE;IACRf;EACJ,CAAC;EACDgB,OAAO,EAAE;IACLC,QAAQA,CAAA,EAAG;MACP,MAAMC,aAAY,GAAI,IAAI,CAACX,EAAE,CAACY,SAAS,EAAC;MACxC,IAAI,CAACD,aAAa,EAAE;QAChB,IAAI,CAACE,GAAG,EAAC;MACb;IACJ,CAAC;IACDA,GAAGA,CAAA,EAAG;MACFrB,GAAG,CAACsB,IAAI,CAAC,YAAY,EAAE;QACnBZ,SAAS,EAAE,IAAI,CAACA,SAAS;QACzBC,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3BC,QAAQ,EAAE,IAAI,CAACA,QAAQ;QACvBR,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBmB,QAAQ,EAAE,IAAI,CAACV;MACnB,CAAC,CAAC,CAACW,IAAI,CAACC,QAAO,IAAK;QAChBC,OAAO,CAACC,GAAG,CAAC,yBAAyB;QACrCD,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAChB,IAAI;QAEzB,IAAI,CAACmB,MAAM,CAACC,QAAQ,CAAC,WAAW,EAAE;UAC9BjB,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBW,QAAQ,EAAE,IAAI,CAACV;QACnB,CAAC,CAAC,CAACW,IAAI,CAAC,MAAM;UACV,IAAI,CAACM,OAAO,CAACC,EAAE,CAAC,CAAC,CAAC;QACtB,CAAC;MACL,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;QACZP,OAAO,CAACC,GAAG,CAACM,GAAG;MACnB,CAAC;IACL;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}