{"ast":null,"code":"import { API } from '../axios-api';\nimport { v4 as uuidv4 } from \"uuid\";\nimport Navbar from '../components/Navbar.vue';\nexport default {\n  name: 'CreateCard',\n  components: {\n    Navbar\n  },\n  data() {\n    return {\n      word: \"\",\n      front_word: \"\",\n      front_pic: null,\n      back: \"\",\n      deck: ''\n    };\n  },\n  created() {\n    API.get(`/cards/decks/${this.$route.params.slug}`).then(response => {\n      console.log(response.data);\n      this.deck = response.data.id;\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  methods: {\n    handleImg(e) {\n      this.front_pic = e.target.files[0];\n      let img = document.getElementById('img');\n      img.src = URL.createObjectURL(e.target.files[0]);\n    },\n    add() {\n      let fd = new FormData();\n      fd.append('word', this.word);\n      if (this.front_word != '') {\n        fd.append('front_word', this.front_word);\n      }\n      if (this.front_pic != null) {\n        let fileName = uuidv4() + '.png';\n        fd.append('front_pic', this.front_pic, fileName);\n      }\n      fd.append('back', this.back);\n      fd.append('deck_id', this.deck);\n      API.post('/cards/or_cards/', fd, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Authorization': `Bearer ${this.accessToken}`\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.clearData();\n        let form = document.getElementById('form');\n        // form.reset()\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    clearData() {\n      let img = document.getElementById('img');\n      img.setAttribute('src', '');\n      this.word = \"\";\n      this.front_word = \"\";\n      this.front_pic = null;\n      this.back = \"\";\n    }\n  }\n};","map":{"version":3,"names":["API","v4","uuidv4","Navbar","name","components","data","word","front_word","front_pic","back","deck","created","get","$route","params","slug","then","response","console","log","id","catch","err","methods","handleImg","e","target","files","img","document","getElementById","src","URL","createObjectURL","add","fd","FormData","append","fileName","post","headers","accessToken","clearData","form","setAttribute"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/card_views/CreateCard.vue"],"sourcesContent":["<template>\n    <Navbar></Navbar>\n    <div class=\"container p-5\">\n        <form class=\"p-3 bg-light border border-3 rounded-3\" @submit.prevent=\"add\" id=\"form\">\n            <div class=\"mb-3\">\n                <label for=\"InputWord\" class=\"form-label\">Слово</label>\n                <input type=\"text\" class=\"form-control\" id=\"InputWord\" v-model=\"word\">\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Передняя сторона</h5>\n                <div class=\"row\">\n                    <div class=\"mb-3 col\">\n                        <label for=\"InputFrontWord\" class=\"form-label\">Слово</label>\n                        <input class=\"form-control\" id=\"InputFrontWord\" v-model=\"front_word\">\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"InputImg\" class=\"form-label\">Фото</label>\n                        <input class=\"form-control form-control-sm\" id=\"InputImg\" type=\"file\" @change=\"handleImg\">\n                    </div>\n                    <div class=\"mb-3\" style=\"height: 200px\">\n                        <img id=\"img\" src=\"\" class=\"h-100\">\n                    </div>\n                </div>\n            </div>\n            <div class=\"border-top border-3 row\">\n                <h5 class=\"mt-2\">Задняя сторона</h5>\n                <div class=\"mb-3\">\n                    <textarea class=\"form-control\" id=\"back\" v-model=\"back\"></textarea>\n                </div>\n            </div>\n            <div class=\"d-flex justify-content-between\">\n                <button type=\"submit\" class=\"btn btn-primary\">Добавить</button>\n                <router-link :to=\"{ name: 'deck', params: { slug: this.$route.params.slug } }\" class=\"btn btn-outline-dark\">Перейти к стопке</router-link>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport { v4 as uuidv4 } from \"uuid\"\nimport Navbar from '../components/Navbar.vue'\n\nexport default {\n    name: 'CreateCard',\n    components: {\n        Navbar,\n    },\n    data() {\n        return {\n            word: \"\",\n            front_word: \"\",\n            front_pic: null,\n            back: \"\",\n            deck: '',\n        }\n    },\n    created() {\n        API.get(`/cards/decks/${this.$route.params.slug}`).then(response => {\n            console.log(response.data)\n            this.deck = response.data.id\n        }).catch(err => {\n            console.log(err)\n        })\n    },\n    methods: {\n        handleImg(e) {\n            this.front_pic = e.target.files[0];\n            let img = document.getElementById('img')\n            img.src = URL.createObjectURL(e.target.files[0])\n        },\n        add() {\n            let fd = new FormData();\n\n            fd.append('word', this.word)\n\n            if (this.front_word != '') {\n                fd.append('front_word', this.front_word)\n            }\n            if (this.front_pic != null) {\n                let fileName = uuidv4() + '.png';\n                fd.append('front_pic', this.front_pic, fileName)\n            }\n\n            fd.append('back', this.back)\n            fd.append('deck_id', this.deck)\n\n            API.post('/cards/or_cards/', fd, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    'Authorization': `Bearer ${this.accessToken}`,\n                },\n            }).then(response => {\n                console.log(response.data)\n                this.clearData()\n                let form = document.getElementById('form')\n                // form.reset()\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n        clearData() {\n            let img = document.getElementById('img')\n            img.setAttribute('src', '')\n            this.word = \"\"\n            this.front_word = \"\"\n            this.front_pic = null\n            this.back = \"\"\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}