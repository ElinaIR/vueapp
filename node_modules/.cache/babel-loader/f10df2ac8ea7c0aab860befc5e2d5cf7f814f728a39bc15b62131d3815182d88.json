{"ast":null,"code":"import { mapState } from 'vuex';\nimport { API } from '../axios-api';\nexport default {\n  name: 'Navbar',\n  data() {\n    return {\n      profile: '',\n      loaded: false\n    };\n  },\n  computed: {\n    ...mapState(['accessToken', 'user']),\n    cardsApp() {\n      const url = this.$route.path;\n      const regex = /^(.*)\\/cards.*/;\n      const match = regex.exec(url);\n      if (match) return true;else return false;\n    }\n  },\n  created() {\n    API.get('/get-csrf/').then(response => {\n      console.log(response.data);\n      localStorage.setItem('csrfToken', response.data.csrf_token);\n    }).catch(err => {\n      console.log(err);\n    });\n    API.get('/cards/profiles').then(response => {\n      console.log(response.data);\n      let profiles = response.data;\n      profiles.forEach(p => {\n        if (p.user.id == this.user.id) {\n          this.profile = p;\n        }\n      });\n      this.loaded = true;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n};","map":{"version":3,"names":["mapState","API","name","data","profile","loaded","computed","cardsApp","url","$route","path","regex","match","exec","created","get","then","response","console","log","localStorage","setItem","csrf_token","catch","err","profiles","forEach","p","user","id"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/components/Navbar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n    <div class=\"container\">\n        <div class=\"d-flex w-100 flex-wrap align-items-center justify-content-start\">\n            <a class=\"navbar-brand\" href=\"/\">English Online</a>\n            <a class=\"navbar-brand\" href=\"/\"><img src=\"../assets/Union.svg\" /></a>\n\n            <ul class=\"nav col-auto me-auto\">\n                <li><router-link :to = \"{ name: 'home' }\" exact class=\"nav-link link-dark\"> Главная </router-link></li>\n                <li><router-link :to = \"{ name: 'decks' }\" exact class=\"nav-link link-dark\"> Карточки </router-link></li>\n                <li><router-link :to = \"{ name: 'stats' }\" exact class=\"nav-link link-dark\"> Статистика </router-link></li>\n            </ul>\n            <router-link :to = \"{ name: 'login' }\" exact class=\"btn btn-outline-dark text-end\" v-if=\"accessToken == null\"> Войти </router-link>\n\n            <div class=\"dropdown text-end\" v-if=\"(accessToken != null) && !cardsApp && loaded\">\n                <a href=\"#\" class=\"dropdown-toggle text-decoration-none link-dark btn\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">{{ user.last_name }} {{ user.first_name }}</a>\n                <ul class=\"dropdown-menu text-small dropdown-menu-end text-end\" style=\"min-width: 5rem\">\n                    <li><router-link :to = \"{ name: 'logout' }\" exact class=\"dropdown-item\"> Выйти </router-link></li>\n                </ul>\n            </div>\n\n            <div class=\"dropdown text-end\" v-if=\"(accessToken != null) && cardsApp && loaded\">\n                <a href=\"#\" class=\"link-dark text-decoration-none dropdown-toggle btn\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">{{ user.username }}</a>\n                <ul class=\"dropdown-menu text-small text-end dropdown-menu-end w-auto\" style=\"min-width: 9rem\">\n                    <li><router-link :to = \"{ name: 'my-decks' }\" exact class=\"dropdown-item\"> Мои стопки </router-link></li>\n                    <li><router-link :to = \"{ name: 'tests' }\" exact class=\"dropdown-item\"> Тесты </router-link></li>\n                    <li v-if=\"(accessToken != null) && (profile.role == 1)\"><router-link :to = \"{ name: 'my-tests' }\" exact class=\"dropdown-item\"> Результаты тестов </router-link></li>\n                    <li><hr class=\"dropdown-divider\"></li>\n                    <li><router-link :to = \"{ name: 'logout' }\" exact class=\"dropdown-item\"> Выйти </router-link></li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    </nav>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import { API } from '../axios-api'\n    export default {\n        name: 'Navbar',\n        data() {\n            return {\n                profile: '',\n                loaded: false,\n            }\n        },\n        computed: {\n            ...mapState(['accessToken', 'user']),\n            cardsApp() {\n                const url = this.$route.path\n                const regex = /^(.*)\\/cards.*/\n                const match = regex.exec(url)\n                if (match) return true\n                else return false\n            }\n        },\n        created() {\n            API.get('/get-csrf/').then(response => {\n                console.log(response.data)\n                localStorage.setItem('csrfToken', response.data.csrf_token)\n            }).catch(err => {\n                console.log(err)\n            })\n\n            API.get('/cards/profiles').then(response => {\n                console.log(response.data)\n                let profiles = response.data\n                profiles.forEach(p => {\n                    if (p.user.id == this.user.id) {\n                        this.profile = p\n                    }\n                })\n\n                this.loaded = true\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n    }\n</script>\n\n<style scoped>\n    \n</style>"],"mappings":"AAqCI,SAASA,QAAO,QAAS,MAAK;AAC9B,SAASC,GAAE,QAAS,cAAa;AACjC,eAAe;EACXC,IAAI,EAAE,QAAQ;EACdC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE;IACZ;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGN,QAAQ,CAAC,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;IACpCO,QAAQA,CAAA,EAAG;MACP,MAAMC,GAAE,GAAI,IAAI,CAACC,MAAM,CAACC,IAAG;MAC3B,MAAMC,KAAI,GAAI,gBAAe;MAC7B,MAAMC,KAAI,GAAID,KAAK,CAACE,IAAI,CAACL,GAAG;MAC5B,IAAII,KAAK,EAAE,OAAO,IAAG,MAChB,OAAO,KAAI;IACpB;EACJ,CAAC;EACDE,OAAOA,CAAA,EAAG;IACNb,GAAG,CAACc,GAAG,CAAC,YAAY,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;MACnCC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACd,IAAI;MACzBiB,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEJ,QAAQ,CAACd,IAAI,CAACmB,UAAU;IAC9D,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;MACZN,OAAO,CAACC,GAAG,CAACK,GAAG;IACnB,CAAC;IAEDvB,GAAG,CAACc,GAAG,CAAC,iBAAiB,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;MACxCC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACd,IAAI;MACzB,IAAIsB,QAAO,GAAIR,QAAQ,CAACd,IAAG;MAC3BsB,QAAQ,CAACC,OAAO,CAACC,CAAA,IAAK;QAClB,IAAIA,CAAC,CAACC,IAAI,CAACC,EAAC,IAAK,IAAI,CAACD,IAAI,CAACC,EAAE,EAAE;UAC3B,IAAI,CAACzB,OAAM,GAAIuB,CAAA;QACnB;MACJ,CAAC;MAED,IAAI,CAACtB,MAAK,GAAI,IAAG;IACrB,CAAC,CAAC,CAACkB,KAAK,CAACC,GAAE,IAAK;MACZN,OAAO,CAACC,GAAG,CAACK,GAAG;IACnB,CAAC;EACL;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}