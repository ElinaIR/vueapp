{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { API } from '../axios-api';\nimport { v4 as uuidv4 } from \"uuid\";\nexport default {\n  name: 'addEGEVariant',\n  data() {\n    return {\n      name: \"\",\n      task1: \"\",\n      text: \"\",\n      task1audio: null,\n      task4: \"\",\n      task4audio: null,\n      task4pic1: null,\n      task4pic2: null,\n      task4pic3: null,\n      tasks: []\n    };\n  },\n  methods: {\n    handleTask1audio(e) {\n      this.task1audio = e.target.files[0];\n    },\n    handleTask4audio(e) {\n      this.task4audio = e.target.files[0];\n    },\n    handleTask4photos(e) {\n      this.task4pic1 = e.target.files[0];\n      this.task4pic2 = e.target.files[1];\n      this.task4pic3 = e.target.files[2];\n      let img1 = document.getElementById('photo1');\n      let img2 = document.getElementById('photo2');\n      let img3 = document.getElementById('photo3');\n      img1.src = URL.createObjectURL(e.target.files[0]);\n      img2.src = URL.createObjectURL(e.target.files[1]);\n      img3.src = URL.createObjectURL(e.target.files[2]);\n    },\n    add() {\n      let fd = new FormData();\n      fd.append('task', this.task1);\n      let fileName = uuidv4() + '.mp3';\n      fd.append('audio', this.task1audio, fileName);\n      fd.append('text', this.text);\n      API.post('/vpr/task1/', fd, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'X-CSRFToken': localStorage.getItem('csrfToken')\n        }\n      }).then(response => {\n        console.log('task1', response.data);\n        this.tasks.push(response.data.id);\n        fd = new FormData();\n        fd.append('task', this.task4);\n        fileName = uuidv4() + '.mp3';\n        fd.append('audio', this.task4audio, fileName);\n        fileName = uuidv4() + '.png';\n        fd.append('pic1', this.task4pic1, fileName);\n        fileName = uuidv4() + '.png';\n        fd.append('pic2', this.task4pic2, fileName);\n        fileName = uuidv4() + '.png';\n        fd.append('pic3', this.task4pic3, fileName);\n        fd.append('prepare_time', 90);\n        fd.append('record_time', 120);\n        API.post('/vpr/task2/', fd, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'X-CSRFToken': localStorage.getItem('csrfToken')\n          }\n        }).then(response => {\n          console.log('task2', response.data, response.data.id);\n          this.tasks.push(response.data.id);\n          console.log(this.tasks);\n          API.post('/vpr/variants/', {\n            name: this.name,\n            task1: this.tasks[0],\n            task2: this.tasks[1]\n          }, {\n            headers: {\n              'Authorization': `Bearer ${this.$store.state.accessToken}`,\n              'X-CSRFToken': localStorage.getItem('csrfToken')\n            }\n          }).then(response => {\n            console.log('variant created', response.data);\n            this.clearData();\n            // this.$router.push({ name: 'exam', params: { exam: 'vpr' } })\n          }).catch(err => {\n            console.log(err);\n            if (err == 401) {\n              this.clearData();\n            }\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    clearData() {\n      this.name = '';\n      this.text = '';\n      this.task1audio = null;\n      this.task4audio = null;\n      this.task4pic1 = null;\n      this.task4pic2 = null;\n      this.task4pic3 = null;\n      this.tasks = [];\n      let img1 = document.getElementById('photo2');\n      let img2 = document.getElementById('photo3');\n      img1.src = '';\n      img2.src = '';\n    }\n  }\n};","map":{"version":3,"names":["API","v4","uuidv4","name","data","task1","text","task1audio","task4","task4audio","task4pic1","task4pic2","task4pic3","tasks","methods","handleTask1audio","e","target","files","handleTask4audio","handleTask4photos","img1","document","getElementById","img2","img3","src","URL","createObjectURL","add","fd","FormData","append","fileName","post","headers","localStorage","getItem","then","response","console","log","push","id","task2","$store","state","accessToken","clearData","catch","err"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/views/addVPRVariant.vue"],"sourcesContent":["<template>\n    <div class=\"container p-5\">\n        <form class=\"p-3 bg-light border border-3 rounded-3\" @submit.prevent=\"add()\">\n            <div class=\"mb-3\">\n                <label for=\"InputName\" class=\"form-label\">Название варианта ВПР</label>\n                <input type=\"text\" class=\"form-control\" id=\"InputName\" v-model=\"name\">\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 1</h5>\n                <div class=\"row g-3\">\n                    <div class=\"mb-3 col\">\n                        <label for=\"InputTask1Task\" class=\"form-label\">Задание</label>\n                        <textarea rows=\"10\" class=\"form-control\" id=\"InputTask1Task\" v-model=\"task1\"></textarea>\n                    </div>\n                    <div class=\"mb-3 col-9\">\n                        <label for=\"InputText\" class=\"form-label\">Текст</label>\n                        <textarea rows=\"10\" class=\"form-control\" id=\"InputText\" v-model=\"text\"></textarea>\n                    </div>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask1audio\" class=\"form-label\">Загрузите аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask1audio\" type=\"file\" @change=\"handleTask1audio\">\n                </div>\n            </div>\n            <div class=\"border-top border-3 row\">\n                <h5 class=\"mt-2\">Задание 2</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4Task\" class=\"form-label\">Задание</label>\n                    <textarea rows=\"9\" class=\"form-control\" id=\"InputTask4Task\" v-model=\"task4\"></textarea>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4photo\" class=\"form-label\">Загрузите 3 фото</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask4photo\" type=\"file\" multiple\n                        @change=\"handleTask4photos\">\n                </div>\n                <div class=\"mb-3 col\">\n                    <img id=\"photo1\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3 col\">\n                    <img id=\"photo2\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3 col\">\n                    <img id=\"photo3\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4audio\" class=\"form-label\">Загрузите аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask4audio\" type=\"file\" @change=\"handleTask4audio\">\n                </div>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Добавить</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport { v4 as uuidv4 } from \"uuid\"\n\nexport default {\n    name: 'addEGEVariant',\n    data() {\n        return {\n            name: \"\",\n            task1: \"\",\n            text: \"\",\n            task1audio: null,\n            task4: \"\",\n            task4audio: null,\n            task4pic1: null,\n            task4pic2: null,\n            task4pic3: null,\n            tasks: [],\n        }\n    },\n    methods: {\n        handleTask1audio(e) {\n            this.task1audio = e.target.files[0];\n        },\n        handleTask4audio(e) {\n            this.task4audio = e.target.files[0];\n        },\n        handleTask4photos(e) {\n            this.task4pic1 = e.target.files[0];\n            this.task4pic2 = e.target.files[1];\n            this.task4pic3 = e.target.files[2];\n            let img1 = document.getElementById('photo1')\n            let img2 = document.getElementById('photo2')\n            let img3 = document.getElementById('photo3')\n            img1.src = URL.createObjectURL(e.target.files[0])\n            img2.src = URL.createObjectURL(e.target.files[1])\n            img3.src = URL.createObjectURL(e.target.files[2])\n        },\n        add() {\n            let fd = new FormData();\n\n            fd.append('task', this.task1)\n            let fileName = uuidv4() + '.mp3';\n            fd.append('audio', this.task1audio, fileName)\n            fd.append('text', this.text)\n            API.post('/vpr/task1/', fd, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    'X-CSRFToken': localStorage.getItem('csrfToken')\n                },\n            }).then(response => {\n                console.log('task1', response.data)\n                this.tasks.push(response.data.id)\n\n                fd = new FormData()\n\n                fd.append('task', this.task4)\n                fileName = uuidv4() + '.mp3';\n                fd.append('audio', this.task4audio, fileName)\n                fileName = uuidv4() + '.png';\n                fd.append('pic1', this.task4pic1, fileName)\n                fileName = uuidv4() + '.png';\n                fd.append('pic2', this.task4pic2, fileName)\n                fileName = uuidv4() + '.png';\n                fd.append('pic3', this.task4pic3, fileName)\n                fd.append('prepare_time', 90)\n                fd.append('record_time', 120)\n                API.post('/vpr/task2/', fd, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                        'X-CSRFToken': localStorage.getItem('csrfToken')\n                    },\n                }).then(response => {\n                    console.log('task2', response.data, response.data.id)\n                    this.tasks.push(response.data.id)\n\n                    console.log(this.tasks)\n\n                    API.post('/vpr/variants/', {\n                        name: this.name,\n                        task1: this.tasks[0],\n                        task2: this.tasks[1],\n                    }, {\n                        headers: {\n                            'Authorization': `Bearer ${this.$store.state.accessToken}`,\n                            'X-CSRFToken': localStorage.getItem('csrfToken')\n                        },\n                    }).then(response => {\n                        console.log('variant created', response.data)\n                        this.clearData()\n                        // this.$router.push({ name: 'exam', params: { exam: 'vpr' } })\n                    }).catch(err => {\n                        console.log(err)\n                        if (err == 401) {\n                            this.clearData()\n                        }\n                    })\n                }).catch(err => {\n                    console.log(err)\n                })\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n        clearData() {\n            this.name = ''\n            this.text = ''\n            this.task1audio = null\n            this.task4audio = null\n            this.task4pic1 = null\n            this.task4pic2 = null\n            this.task4pic3 = null\n            this.tasks = []\n\n            let img1 = document.getElementById('photo2')\n            let img2 = document.getElementById('photo3')\n            img1.src = ''\n            img2.src = ''\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}