{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { API } from '../axios-api';\nimport { v4 as uuidv4 } from \"uuid\";\nimport Navbar from '../components/Navbar.vue';\nexport default {\n  name: 'EditCard',\n  components: {\n    Navbar\n  },\n  data() {\n    return {\n      word: \"\",\n      front_word: \"\",\n      front_pic: null,\n      back: \"\",\n      deck: ''\n    };\n  },\n  created() {\n    API.get(`/cards/decks/${this.$route.params.slug}`).then(response => {\n      console.log(response.data);\n      this.deck = response.data.id;\n      API.get(`/cards/or_cards/${this.$route.params.id}`).then(response => {\n        console.log(response.data);\n        let card = response.data;\n        this.word = card.word;\n        this.front_word = card.front_word;\n        this.back = card.back;\n        let img = document.getElementById('img');\n        img.src = 'http://127.0.0.1:8000' + card.front_pic;\n      }).catch(err => {\n        console.log(err);\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  methods: {\n    handleImg(e) {\n      this.front_pic = e.target.files[0];\n      let img = document.getElementById('img');\n      img.src = URL.createObjectURL(e.target.files[0]);\n    },\n    add() {\n      let fd = new FormData();\n      fd.append('word', this.word);\n      if (this.front_word != '') {\n        fd.append('front_word', this.front_word);\n      }\n      if (this.front_pic != null) {\n        let fileName = uuidv4() + '.png';\n        fd.append('front_pic', this.front_pic, fileName);\n      }\n      fd.append('back', this.back);\n      API.patch(`/cards/or_cards/${this.$route.params.id}/`, fd, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Authorization': `Bearer ${this.accessToken}`\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.$router.push({\n          name: 'deck',\n          params: {\n            slug: this.$route.params.slug\n          }\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    del() {\n      API.delete(`/cards/or_cards/${this.$route.params.id}`, {\n        headers: {\n          'Authorization': `Bearer ${this.$store.state.accessToken}`\n        }\n      }).then(response => {\n        console.log('card deleted', response.data);\n        this.$router.push({\n          name: 'deck',\n          params: {\n            slug: this.$route.params.slug\n          }\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["API","v4","uuidv4","Navbar","name","components","data","word","front_word","front_pic","back","deck","created","get","$route","params","slug","then","response","console","log","id","card","img","document","getElementById","src","catch","err","methods","handleImg","e","target","files","URL","createObjectURL","add","fd","FormData","append","fileName","patch","headers","accessToken","$router","push","del","delete","$store","state"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/card_views/EditCard.vue"],"sourcesContent":["<template>\n    <Navbar></Navbar>\n    <div class=\"container p-5\">\n        <form class=\"p-3 bg-light border border-3 rounded-3\" @submit.prevent=\"add\" id=\"form\">\n            <div class=\"mb-3\">\n                <label for=\"InputWord\" class=\"form-label\">Слово</label>\n                <input type=\"text\" class=\"form-control\" id=\"InputWord\" v-model=\"word\">\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Передняя сторона</h5>\n                <div class=\"row\">\n                    <div class=\"mb-3 col\">\n                        <label for=\"InputFrontWord\" class=\"form-label\">Слово</label>\n                        <input class=\"form-control\" id=\"InputFrontWord\" v-model=\"front_word\">\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"InputImg\" class=\"form-label\">Фото</label>\n                        <input class=\"form-control form-control-sm\" id=\"InputImg\" type=\"file\" @change=\"handleImg\">\n                    </div>\n                    <div class=\"mb-3\" style=\"height: 200px\">\n                        <img id=\"img\" src=\"\" class=\"h-100\">\n                    </div>\n                </div>\n            </div>\n            <div class=\"border-top border-3 row\">\n                <h5 class=\"mt-2\">Задняя сторона</h5>\n                <div class=\"mb-3\">\n                    <textarea class=\"form-control\" id=\"back\" v-model=\"back\"></textarea>\n                </div>\n            </div>\n            <div class=\"d-flex justify-content-between\">\n                <button type=\"submit\" class=\"btn btn-primary\">Сохранить</button>\n                <button class=\"btn btn-outline-danger\" @click=\"del()\">Удалить карточку</button>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport { v4 as uuidv4 } from \"uuid\"\nimport Navbar from '../components/Navbar.vue'\n\nexport default {\n    name: 'EditCard',\n    components: {\n        Navbar,\n    },\n    data() {\n        return {\n            word: \"\",\n            front_word: \"\",\n            front_pic: null,\n            back: \"\",\n            deck: '',\n        }\n    },\n    created() {\n        API.get(`/cards/decks/${this.$route.params.slug}`).then(response => {\n            console.log(response.data)\n            this.deck = response.data.id\n\n            API.get(`/cards/or_cards/${this.$route.params.id}`).then(response => {\n                console.log(response.data)\n                let card = response.data\n                this.word = card.word\n                this.front_word = card.front_word\n                this.back = card.back\n                let img = document.getElementById('img')\n                img.src = 'http://127.0.0.1:8000' + card.front_pic\n            }).catch(err => {\n                console.log(err)\n            })\n        }).catch(err => {\n            console.log(err)\n        })\n    },\n    methods: {\n        handleImg(e) {\n            this.front_pic = e.target.files[0];\n            let img = document.getElementById('img')\n            img.src = URL.createObjectURL(e.target.files[0])\n        },\n        add() {\n            let fd = new FormData();\n\n            fd.append('word', this.word)\n\n            if (this.front_word != '') {\n                fd.append('front_word', this.front_word)\n            }\n            if (this.front_pic != null) {\n                let fileName = uuidv4() + '.png';\n                fd.append('front_pic', this.front_pic, fileName)\n            }\n\n            fd.append('back', this.back)\n\n            API.patch(`/cards/or_cards/${this.$route.params.id}/`, fd, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    'Authorization': `Bearer ${this.accessToken}`,\n                },\n            }).then(response => {\n                console.log(response.data)\n                this.$router.push({ name: 'deck', params: { slug: this.$route.params.slug } })\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n        del() {\n            API.delete(`/cards/or_cards/${this.$route.params.id}`, {\n                headers: {\n                    'Authorization': `Bearer ${this.$store.state.accessToken}`,\n                },\n            }).then(response => {\n                console.log('card deleted', response.data)\n                this.$router.push({ name: 'deck', params: { slug: this.$route.params.slug } })\n            }).catch(err => {\n                console.log(err)\n            })\n        }\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}