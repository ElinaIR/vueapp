{"ast":null,"code":"// import Vue from 'vue'\nimport { createStore } from 'vuex';\nimport { API } from './axios-api';\nexport default createStore({\n  state: {\n    user: null,\n    accessToken: null,\n    refreshToken: null,\n    APIData: ''\n  },\n  mutations: {\n    updateStorage(state, {\n      access,\n      refresh\n    }) {\n      state.accessToken = access;\n      state.refreshToken = refresh;\n      console.log(state.accessToken);\n    },\n    destroyToken(state) {\n      state.accessToken = null;\n      state.refreshToken = null;\n    },\n    getUser(state) {\n      state.user = JSON.parse(window.localStorage.getItem('auth-user'));\n      console.log(state.user);\n    }\n  },\n  getters: {\n    loggedIn(state) {\n      return state.accessToken != null;\n    }\n  },\n  actions: {\n    userLogin(context, usercredentials) {\n      API.post('/token/', {\n        username: usercredentials.username,\n        password: usercredentials.password\n      }).then(response => {\n        context.commit('updateStorage', {\n          access: response.data.access,\n          refresh: response.data.refresh\n        });\n        context.commit('getUser');\n        resolve();\n      }).catch(err => {\n        reject(err);\n      });\n\n      // return new Promise((resolve, reject) => {\n      //     API.post('/token/', {\n      //         username: usercredentials.username,\n      //         password: usercredentials.password\n      //     })\n      //     .then(response => {\n      //         context.commit('updateStorage', { access: response.data.access, refresh: response.data.refresh })\n      //         context.commit('getUser')\n      //         resolve()\n      //     })\n      //     .catch(err => {\n      //         reject(err)\n      //     })\n      // })\n    },\n\n    userLogout(context) {\n      console.log(\"is logged in?  \", context.getters.loggedIn);\n      if (context.getters.loggedIn) {\n        context.commit('destroyToken');\n      }\n    }\n  }\n});","map":{"version":3,"names":["createStore","API","state","user","accessToken","refreshToken","APIData","mutations","updateStorage","access","refresh","console","log","destroyToken","getUser","JSON","parse","window","localStorage","getItem","getters","loggedIn","actions","userLogin","context","usercredentials","post","username","password","then","response","commit","data","resolve","catch","err","reject","userLogout"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/store.js"],"sourcesContent":["// import Vue from 'vue'\nimport { createStore} from 'vuex'\nimport { API } from './axios-api'\n\nexport default createStore({\n    state: {\n        user: null,\n        accessToken: null,\n        refreshToken: null,\n        APIData: ''\n    },\n    mutations: {\n        updateStorage (state, { access, refresh }) {\n            state.accessToken = access\n            state.refreshToken = refresh\n            console.log(state.accessToken)\n        },\n        destroyToken (state) {\n            state.accessToken = null\n            state.refreshToken = null\n        },\n        getUser (state) {\n            state.user = JSON.parse(window.localStorage.getItem('auth-user'))\n            console.log(state.user)\n        }\n    },\n    getters: {\n        loggedIn (state) {\n            return state.accessToken != null\n        }\n    },\n    actions: {\n        userLogin (context, usercredentials) {\n                API.post('/token/', {\n                    username: usercredentials.username,\n                    password: usercredentials.password\n                })\n                    .then(response => {\n                        context.commit('updateStorage', { access: response.data.access, refresh: response.data.refresh })\n                        context.commit('getUser')\n                        resolve()\n                    })\n                    .catch(err => {\n                        reject(err)\n                    })\n            \n            // return new Promise((resolve, reject) => {\n            //     API.post('/token/', {\n            //         username: usercredentials.username,\n            //         password: usercredentials.password\n            //     })\n            //     .then(response => {\n            //         context.commit('updateStorage', { access: response.data.access, refresh: response.data.refresh })\n            //         context.commit('getUser')\n            //         resolve()\n            //     })\n            //     .catch(err => {\n            //         reject(err)\n            //     })\n            // })\n        },\n        userLogout (context) {\n            console.log(\"is logged in?  \", context.getters.loggedIn)\n            if (context.getters.loggedIn) {\n                context.commit('destroyToken')\n            }\n        }\n    }\n})"],"mappings":"AAAA;AACA,SAASA,WAAW,QAAO,MAAM;AACjC,SAASC,GAAG,QAAQ,aAAa;AAEjC,eAAeD,WAAW,CAAC;EACvBE,KAAK,EAAE;IACHC,IAAI,EAAE,IAAI;IACVC,WAAW,EAAE,IAAI;IACjBC,YAAY,EAAE,IAAI;IAClBC,OAAO,EAAE;EACb,CAAC;EACDC,SAAS,EAAE;IACPC,aAAaA,CAAEN,KAAK,EAAE;MAAEO,MAAM;MAAEC;IAAQ,CAAC,EAAE;MACvCR,KAAK,CAACE,WAAW,GAAGK,MAAM;MAC1BP,KAAK,CAACG,YAAY,GAAGK,OAAO;MAC5BC,OAAO,CAACC,GAAG,CAACV,KAAK,CAACE,WAAW,CAAC;IAClC,CAAC;IACDS,YAAYA,CAAEX,KAAK,EAAE;MACjBA,KAAK,CAACE,WAAW,GAAG,IAAI;MACxBF,KAAK,CAACG,YAAY,GAAG,IAAI;IAC7B,CAAC;IACDS,OAAOA,CAAEZ,KAAK,EAAE;MACZA,KAAK,CAACC,IAAI,GAAGY,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC;MACjER,OAAO,CAACC,GAAG,CAACV,KAAK,CAACC,IAAI,CAAC;IAC3B;EACJ,CAAC;EACDiB,OAAO,EAAE;IACLC,QAAQA,CAAEnB,KAAK,EAAE;MACb,OAAOA,KAAK,CAACE,WAAW,IAAI,IAAI;IACpC;EACJ,CAAC;EACDkB,OAAO,EAAE;IACLC,SAASA,CAAEC,OAAO,EAAEC,eAAe,EAAE;MAC7BxB,GAAG,CAACyB,IAAI,CAAC,SAAS,EAAE;QAChBC,QAAQ,EAAEF,eAAe,CAACE,QAAQ;QAClCC,QAAQ,EAAEH,eAAe,CAACG;MAC9B,CAAC,CAAC,CACGC,IAAI,CAACC,QAAQ,IAAI;QACdN,OAAO,CAACO,MAAM,CAAC,eAAe,EAAE;UAAEtB,MAAM,EAAEqB,QAAQ,CAACE,IAAI,CAACvB,MAAM;UAAEC,OAAO,EAAEoB,QAAQ,CAACE,IAAI,CAACtB;QAAQ,CAAC,CAAC;QACjGc,OAAO,CAACO,MAAM,CAAC,SAAS,CAAC;QACzBE,OAAO,EAAE;MACb,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;QACVC,MAAM,CAACD,GAAG,CAAC;MACf,CAAC,CAAC;;MAEV;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACJ,CAAC;;IACDE,UAAUA,CAAEb,OAAO,EAAE;MACjBb,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEY,OAAO,CAACJ,OAAO,CAACC,QAAQ,CAAC;MACxD,IAAIG,OAAO,CAACJ,OAAO,CAACC,QAAQ,EAAE;QAC1BG,OAAO,CAACO,MAAM,CAAC,cAAc,CAAC;MAClC;IACJ;EACJ;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}