{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container p-5\"\n};\nconst _hoisted_2 = {\n  class: \"mb-3\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputName\",\n  class: \"form-label\"\n}, \"Название варианта ВПР\", -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"border-top border-3\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"mt-2\"\n}, \"Задание 1\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"row g-3\"\n};\nconst _hoisted_7 = {\n  class: \"mb-3 col\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputTask1Task\",\n  class: \"form-label\"\n}, \"Задание\", -1 /* HOISTED */);\nconst _hoisted_9 = {\n  class: \"mb-3 col-9\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputText\",\n  class: \"form-label\"\n}, \"Текст\", -1 /* HOISTED */);\nconst _hoisted_11 = {\n  class: \"mb-3\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputTask1audio\",\n  class: \"form-label\"\n}, \"Загрузите аудио\", -1 /* HOISTED */);\nconst _hoisted_13 = {\n  class: \"border-top border-3 row\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"mt-2\"\n}, \"Задание 2\", -1 /* HOISTED */);\nconst _hoisted_15 = {\n  class: \"mb-3\"\n};\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputTask4Task\",\n  class: \"form-label\"\n}, \"Задание\", -1 /* HOISTED */);\nconst _hoisted_17 = {\n  class: \"mb-3\"\n};\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputTask4photo\",\n  class: \"form-label\"\n}, \"Загрузите 3 фото\", -1 /* HOISTED */);\nconst _hoisted_19 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"mb-3 col\\\"><img id=\\\"photo1\\\" src=\\\"\\\" class=\\\"img-fluid\\\"></div><div class=\\\"mb-3 col\\\"><img id=\\\"photo2\\\" src=\\\"\\\" class=\\\"img-fluid\\\"></div><div class=\\\"mb-3 col\\\"><img id=\\\"photo3\\\" src=\\\"\\\" class=\\\"img-fluid\\\"></div>\", 3);\nconst _hoisted_22 = {\n  class: \"mb-3\"\n};\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputTask4audio\",\n  class: \"form-label\"\n}, \"Загрузите аудио\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", {\n    class: \"p-3 bg-light border border-3 rounded-3\",\n    onSubmit: _cache[8] || (_cache[8] = (...args) => $options.add && $options.add(...args)),\n    id: \"form\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"InputName\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]])]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"textarea\", {\n    rows: \"7\",\n    class: \"form-control\",\n    id: \"InputTask1Task\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.task1 = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.task1]])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"textarea\", {\n    rows: \"7\",\n    class: \"form-control\",\n    id: \"InputText\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.text = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.text]])])]), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"input\", {\n    class: \"form-control form-control-sm\",\n    id: \"InputTask1audio\",\n    type: \"file\",\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.handleTask1audio && $options.handleTask1audio(...args))\n  }, null, 32 /* HYDRATE_EVENTS */)])]), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _createElementVNode(\"div\", _hoisted_15, [_hoisted_16, _withDirectives(_createElementVNode(\"textarea\", {\n    rows: \"9\",\n    class: \"form-control\",\n    id: \"InputTask4Task\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.task4 = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.task4]])]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _createElementVNode(\"input\", {\n    class: \"form-control form-control-sm\",\n    id: \"InputTask4photo\",\n    type: \"file\",\n    multiple: \"\",\n    onChange: _cache[5] || (_cache[5] = (...args) => $options.handleTask4photos && $options.handleTask4photos(...args))\n  }, null, 32 /* HYDRATE_EVENTS */)]), _hoisted_19, _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _createElementVNode(\"input\", {\n    class: \"form-control form-control-sm\",\n    id: \"InputTask4audio\",\n    type: \"file\",\n    onChange: _cache[6] || (_cache[6] = (...args) => $options.handleTask4audio && $options.handleTask4audio(...args))\n  }, null, 32 /* HYDRATE_EVENTS */)])]), _createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.validate && $options.validate(...args))\n  }, \"Добавить\")], 32 /* HYDRATE_EVENTS */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","_createElementBlock","_hoisted_1","onSubmit","_cache","args","$options","add","id","_hoisted_2","_hoisted_3","type","$data","name","$event","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","rows","task1","_hoisted_9","_hoisted_10","text","_hoisted_11","_hoisted_12","onChange","handleTask1audio","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","task4","_hoisted_17","_hoisted_18","multiple","handleTask4photos","_hoisted_19","_hoisted_22","_hoisted_23","handleTask4audio","onClick","validate"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/views/addVPRVariant.vue"],"sourcesContent":["<template>\n    <div class=\"container p-5\">\n        <form class=\"p-3 bg-light border border-3 rounded-3\" @submit=\"add\" id=\"form\">\n            <div class=\"mb-3\">\n                <label for=\"InputName\" class=\"form-label\">Название варианта ВПР</label>\n                <input type=\"text\" class=\"form-control\" id=\"InputName\" v-model=\"name\">\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 1</h5>\n                <div class=\"row g-3\">\n                    <div class=\"mb-3 col\">\n                        <label for=\"InputTask1Task\" class=\"form-label\">Задание</label>\n                        <textarea rows=\"7\" class=\"form-control\" id=\"InputTask1Task\" v-model=\"task1\"></textarea>\n                    </div>\n                    <div class=\"mb-3 col-9\">\n                        <label for=\"InputText\" class=\"form-label\">Текст</label>\n                        <textarea rows=\"7\" class=\"form-control\" id=\"InputText\" v-model=\"text\"></textarea>\n                    </div>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask1audio\" class=\"form-label\">Загрузите аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask1audio\" type=\"file\" @change=\"handleTask1audio\">\n                </div>\n            </div>\n            <div class=\"border-top border-3 row\">\n                <h5 class=\"mt-2\">Задание 2</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4Task\" class=\"form-label\">Задание</label>\n                    <textarea rows=\"9\" class=\"form-control\" id=\"InputTask4Task\" v-model=\"task4\"></textarea>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4photo\" class=\"form-label\">Загрузите 3 фото</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask4photo\" type=\"file\" multiple\n                        @change=\"handleTask4photos\">\n                </div>\n                <div class=\"mb-3 col\">\n                    <img id=\"photo1\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3 col\">\n                    <img id=\"photo2\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3 col\">\n                    <img id=\"photo3\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4audio\" class=\"form-label\">Загрузите аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask4audio\" type=\"file\" @change=\"handleTask4audio\">\n                </div>\n            </div>\n            <button class=\"btn btn-primary\" @click=\"validate\">Добавить</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport { v4 as uuidv4 } from \"uuid\"\n\nexport default {\n    name: 'addEGEVariant',\n    data() {\n        return {\n            name: \"\",\n            task1: \"\",\n            text: \"\",\n            task1audio: null,\n            task4: \"\",\n            task4audio: null,\n            task4pic1: null,\n            task4pic2: null,\n            task4pic3: null,\n            tasks: [],\n        }\n    },\n    methods: {\n        handleTask1audio(e) {\n            this.task1audio = e.target.files[0];\n        },\n        handleTask4audio(e) {\n            this.task4audio = e.target.files[0];\n        },\n        handleTask4photos(e) {\n            this.task4pic1 = e.target.files[0];\n            this.task4pic2 = e.target.files[1];\n            this.task4pic3 = e.target.files[2];\n            let img1 = document.getElementById('photo1')\n            let img2 = document.getElementById('photo2')\n            let img3 = document.getElementById('photo3')\n            img1.src = URL.createObjectURL(e.target.files[0])\n            img2.src = URL.createObjectURL(e.target.files[1])\n            img3.src = URL.createObjectURL(e.target.files[2])\n        },\n        validate() {\n            let form = document.getElementById('form')\n            form.submit()\n        },\n        add() {\n            let fd = new FormData();\n\n            fd.append('task', this.task1)\n            let fileName = uuidv4() + '.mp3';\n            fd.append('audio', this.task1audio, fileName)\n            fd.append('text', this.text)\n            API.post('/vpr/task1/', fd, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    'X-CSRFToken': localStorage.getItem('csrfToken')\n                },\n            }).then(response => {\n                console.log('task1', response.data)\n                this.tasks.push(response.data.id)\n\n                fd = new FormData()\n\n                fd.append('task', this.task4)\n                fileName = uuidv4() + '.mp3';\n                fd.append('audio', this.task4audio, fileName)\n                fileName = uuidv4() + '.png';\n                fd.append('pic1', this.task4pic1, fileName)\n                fileName = uuidv4() + '.png';\n                fd.append('pic2', this.task4pic2, fileName)\n                fileName = uuidv4() + '.png';\n                fd.append('pic3', this.task4pic3, fileName)\n                fd.append('prepare_time', 90)\n                fd.append('record_time', 120)\n                API.post('/vpr/task2/', fd, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                        'X-CSRFToken': localStorage.getItem('csrfToken')\n                    },\n                }).then(response => {\n                    console.log('task2', response.data, response.data.id)\n                    this.tasks.push(response.data.id)\n\n                    console.log(this.tasks)\n\n                    API.post('/vpr/variants/', {\n                        name: this.name,\n                        task1: this.tasks[0],\n                        task2: this.tasks[1],\n                    }, {\n                        headers: {\n                            'Authorization': `Bearer ${this.$store.state.accessToken}`,\n                            'X-CSRFToken': localStorage.getItem('csrfToken')\n                        },\n                    }).then(response => {\n                        console.log('vpr variant created', response.data)\n                        this.clearData()\n\n                        let form = document.getElementById('form')\n                        form.reset()\n                        // this.$router.push({ name: 'exam', params: { exam: 'vpr' } })\n                    }).catch(err => {\n                        console.log(err)\n                    })\n                }).catch(err => {\n                    console.log(err)\n                })\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n        clearData() {\n            this.tasks = []\n            let img1 = document.getElementById('photo1')\n            let img2 = document.getElementById('photo2')\n            let img3 = document.getElementById('photo3')\n            img1.setAttribute('src', '')\n            img2.setAttribute('src', '')\n            img3.setAttribute('src', '')\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":";;EACSA,KAAK,EAAC;AAAe;;EAEbA,KAAK,EAAC;AAAM;gCACbC,mBAAA,CAAuE;EAAhEC,GAAG,EAAC,WAAW;EAACF,KAAK,EAAC;GAAa,uBAAqB;;EAG9DA,KAAK,EAAC;AAAqB;gCAC5BC,mBAAA,CAA+B;EAA3BD,KAAK,EAAC;AAAM,GAAC,WAAS;;EACrBA,KAAK,EAAC;AAAS;;EACXA,KAAK,EAAC;AAAU;gCACjBC,mBAAA,CAA8D;EAAvDC,GAAG,EAAC,gBAAgB;EAACF,KAAK,EAAC;GAAa,SAAO;;EAGrDA,KAAK,EAAC;AAAY;iCACnBC,mBAAA,CAAuD;EAAhDC,GAAG,EAAC,WAAW;EAACF,KAAK,EAAC;GAAa,OAAK;;EAIlDA,KAAK,EAAC;AAAM;iCACbC,mBAAA,CAAuE;EAAhEC,GAAG,EAAC,iBAAiB;EAACF,KAAK,EAAC;GAAa,iBAAe;;EAIlEA,KAAK,EAAC;AAAyB;iCAChCC,mBAAA,CAA+B;EAA3BD,KAAK,EAAC;AAAM,GAAC,WAAS;;EACrBA,KAAK,EAAC;AAAM;iCACbC,mBAAA,CAA8D;EAAvDC,GAAG,EAAC,gBAAgB;EAACF,KAAK,EAAC;GAAa,SAAO;;EAGrDA,KAAK,EAAC;AAAM;iCACbC,mBAAA,CAAwE;EAAjEC,GAAG,EAAC,iBAAiB;EAACF,KAAK,EAAC;GAAa,kBAAgB;;;EAa/DA,KAAK,EAAC;AAAM;iCACbC,mBAAA,CAAuE;EAAhEC,GAAG,EAAC,iBAAiB;EAACF,KAAK,EAAC;GAAa,iBAAe;;;uBA5C/EG,mBAAA,CAkDM,OAlDNC,UAkDM,GAjDFH,mBAAA,CAgDO;IAhDDD,KAAK,EAAC,wCAAwC;IAAEK,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,GAAA,IAAAD,QAAA,CAAAC,GAAA,IAAAF,IAAA,CAAG;IAAEG,EAAE,EAAC;MAClET,mBAAA,CAGM,OAHNU,UAGM,GAFFC,UAAuE,E,gBACvEX,mBAAA,CAAsE;IAA/DY,IAAI,EAAC,MAAM;IAACb,KAAK,EAAC,cAAc;IAACU,EAAE,EAAC,WAAW;+DAAUI,KAAA,CAAAC,IAAI,GAAAC,MAAA;iDAAJF,KAAA,CAAAC,IAAI,E,KAExEd,mBAAA,CAgBM,OAhBNgB,UAgBM,GAfFC,UAA+B,EAC/BjB,mBAAA,CASM,OATNkB,UASM,GARFlB,mBAAA,CAGM,OAHNmB,UAGM,GAFFC,UAA8D,E,gBAC9DpB,mBAAA,CAAuF;IAA7EqB,IAAI,EAAC,GAAG;IAACtB,KAAK,EAAC,cAAc;IAACU,EAAE,EAAC,gBAAgB;+DAAUI,KAAA,CAAAS,KAAK,GAAAP,MAAA;iDAALF,KAAA,CAAAS,KAAK,E,KAE9EtB,mBAAA,CAGM,OAHNuB,UAGM,GAFFC,WAAuD,E,gBACvDxB,mBAAA,CAAiF;IAAvEqB,IAAI,EAAC,GAAG;IAACtB,KAAK,EAAC,cAAc;IAACU,EAAE,EAAC,WAAW;+DAAUI,KAAA,CAAAY,IAAI,GAAAV,MAAA;iDAAJF,KAAA,CAAAY,IAAI,E,OAG5EzB,mBAAA,CAGM,OAHN0B,WAGM,GAFFC,WAAuE,EACvE3B,mBAAA,CAAwG;IAAjGD,KAAK,EAAC,8BAA8B;IAACU,EAAE,EAAC,iBAAiB;IAACG,IAAI,EAAC,MAAM;IAAEgB,QAAM,EAAAvB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAsB,gBAAA,IAAAtB,QAAA,CAAAsB,gBAAA,IAAAvB,IAAA,CAAgB;yCAG9GN,mBAAA,CAwBM,OAxBN8B,WAwBM,GAvBFC,WAA+B,EAC/B/B,mBAAA,CAGM,OAHNgC,WAGM,GAFFC,WAA8D,E,gBAC9DjC,mBAAA,CAAuF;IAA7EqB,IAAI,EAAC,GAAG;IAACtB,KAAK,EAAC,cAAc;IAACU,EAAE,EAAC,gBAAgB;+DAAUI,KAAA,CAAAqB,KAAK,GAAAnB,MAAA;iDAALF,KAAA,CAAAqB,KAAK,E,KAE9ElC,mBAAA,CAIM,OAJNmC,WAIM,GAHFC,WAAwE,EACxEpC,mBAAA,CACgC;IADzBD,KAAK,EAAC,8BAA8B;IAACU,EAAE,EAAC,iBAAiB;IAACG,IAAI,EAAC,MAAM;IAACyB,QAAQ,EAAR,EAAQ;IAChFT,QAAM,EAAAvB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAA+B,iBAAA,IAAA/B,QAAA,CAAA+B,iBAAA,IAAAhC,IAAA,CAAiB;uCAElCiC,WAEM,EAONvC,mBAAA,CAGM,OAHNwC,WAGM,GAFFC,WAAuE,EACvEzC,mBAAA,CAAwG;IAAjGD,KAAK,EAAC,8BAA8B;IAACU,EAAE,EAAC,iBAAiB;IAACG,IAAI,EAAC,MAAM;IAAEgB,QAAM,EAAAvB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAmC,gBAAA,IAAAnC,QAAA,CAAAmC,gBAAA,IAAApC,IAAA,CAAgB;yCAG9GN,mBAAA,CAAmE;IAA3DD,KAAK,EAAC,iBAAiB;IAAE4C,OAAK,EAAAtC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAqC,QAAA,IAAArC,QAAA,CAAAqC,QAAA,IAAAtC,IAAA,CAAQ;KAAE,UAAQ,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}