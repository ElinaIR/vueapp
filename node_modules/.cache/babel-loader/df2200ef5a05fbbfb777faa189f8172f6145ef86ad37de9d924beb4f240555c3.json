{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { API } from '../axios-api';\nimport Navbar from '../components/Navbar.vue';\nimport { v4 as uuidv4 } from \"uuid\";\nexport default {\n  name: 'addVariant',\n  data() {\n    return {\n      name: \"\",\n      task1: \"\",\n      text: \"\",\n      task1audio: null,\n      task2: \"\",\n      task2audio: null,\n      picCap: \"\",\n      task2pic: null,\n      task2q1: null,\n      task2q2: null,\n      task2q3: null,\n      task2q4: null,\n      task3: \"\",\n      task3audio: null,\n      task3start: null,\n      task3q1: null,\n      task3q2: null,\n      task3q3: null,\n      task3q4: null,\n      task3q5: null,\n      task3end: null,\n      task4: \"\",\n      task4audio: null,\n      task4pic1: null,\n      task4pic2: null,\n      tasks: {\n        task1: null,\n        task2: null,\n        task3: null,\n        task4: null\n      }\n    };\n  },\n  components: {\n    Navbar\n  },\n  methods: {\n    handleTask1PhotoUpload(e) {\n      this.task2pic = e.target.files[0];\n      let img = document.getElementById('photo1');\n      img.src = URL.createObjectURL(e.target.files[0]);\n    },\n    handleTask4PhotoUpload(e) {\n      this.task4pic1 = e.target.files[0];\n      this.task4pic2 = e.target.files[1];\n      let img1 = document.getElementById('photo2');\n      let img2 = document.getElementById('photo3');\n      img1.src = URL.createObjectURL(e.target.files[0]);\n      img2.src = URL.createObjectURL(e.target.files[1]);\n    },\n    add() {\n      console.log('done');\n      let fileName = uuidv4() + '.png';\n      const formData = new FormData();\n      console.log(this.task2pic);\n      // let file = this.task2pic\n      formData.append('pic', this.task2pic, fileName);\n      console.log(fileName);\n      formData.append('task', this.task2);\n      formData.append('pic_caption', this.picCap);\n      console.log(formData);\n      console.log('Post API has received photo');\n      // console.log(response.data)\n      API.post('/task1/', {\n        task: this.task1,\n        text: this.text\n      }).then(response => {\n        console.log('task1', response.data);\n        this.tasks.task1 = response.data.id;\n      }).catch(err => {\n        console.log(err);\n      });\n      console.log('csrftoken', localStorage.getItem('csrfToken'));\n      API.post('/task2/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'X-CSRFToken': localStorage.getItem('csrfToken')\n        }\n      }).then(response => {\n        console.log('task2', response.data);\n        this.tasks.task2 = response.data.id;\n        console.log(this.tasks.task2);\n      }).catch(err => {\n        console.log(err);\n      });\n      API.post('/task3/', {\n        task: this.task3\n      }).then(response => {\n        console.log('task3', response.data);\n        this.tasks.task3 = response.data.id;\n      }).catch(err => {\n        console.log(err);\n      });\n      API.post('/task4/', {\n        task: this.task4\n      }).then(response => {\n        console.log('task4', response.data);\n        this.tasks.task4 = response.data.id;\n      }).catch(err => {\n        console.log(err);\n      });\n      console.log(this.tasks);\n      var all_tasks = true;\n      var missing = [];\n      for (let i in this.tasks) {\n        console.log(i.valueOf());\n        if (i.valueOf() == null) {\n          all_tasks = false;\n          missing.push(i);\n        }\n      }\n      if (all_tasks) {\n        API.post('/variants/', {\n          headers: {\n            Authorization: `Bearer ${this.$store.state.accessToken}`\n          },\n          data: {\n            name: this.name,\n            task1: this.tasks.task1,\n            task2: this.tasks.task2,\n            task3: this.tasks.task3,\n            task4: this.tasks.task4\n          }\n        }).then(response => {\n          console.log('variant created', response.data);\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        for (let i in missing) {\n          console.log('Missing task', missing[i]);\n        }\n      }\n      console.log('yes');\n    }\n  }\n};","map":{"version":3,"names":["API","Navbar","v4","uuidv4","name","data","task1","text","task1audio","task2","task2audio","picCap","task2pic","task2q1","task2q2","task2q3","task2q4","task3","task3audio","task3start","task3q1","task3q2","task3q3","task3q4","task3q5","task3end","task4","task4audio","task4pic1","task4pic2","tasks","components","methods","handleTask1PhotoUpload","e","target","files","img","document","getElementById","src","URL","createObjectURL","handleTask4PhotoUpload","img1","img2","add","console","log","fileName","formData","FormData","append","post","task","then","response","id","catch","err","localStorage","getItem","headers","all_tasks","missing","i","valueOf","push","Authorization","$store","state","accessToken"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/views/addEGEVariant.vue"],"sourcesContent":["<template>\n    <Navbar></Navbar>\n    <div class=\"container p-5\">\n        <form class=\"p-3 bg-light border border-3 rounded-3\" @submit.prevent=\"add()\">\n            <div class=\"mb-3\">\n                <label for=\"InputName\" class=\"form-label\">Название варианта</label>\n                <input type=\"text\" class=\"form-control\" id=\"InputName\" v-model=\"name\">\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 1</h5>\n                <div class=\"row g-3\">\n                    <div class=\"mb-3 col\">\n                        <label for=\"InputTask1Task\" class=\"form-label\">Задание</label>\n                        <textarea rows=\"10\" class=\"form-control\" id=\"InputTask1Task\" v-model=\"task1\"></textarea>\n                    </div>\n                    <div class=\"mb-3 col-9\">\n                        <label for=\"InputText\" class=\"form-label\">Текст</label>\n                        <textarea rows=\"10\" class=\"form-control\" id=\"InputText\" v-model=\"text\"></textarea>\n                    </div>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask1audio\" class=\"form-label\">Загрузите аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask1audio\" type=\"file\" @change=\"handleTask1AudioUpload\">\n                </div>\n            </div>\n            <div class=\"border-top border-3 row\">\n                <h5 class=\"mt-2\">Задание 2</h5>\n                <div class=\"mb-3 col\">\n                    <label for=\"InputTask2pic\" class=\"form-label\">Загрузите фото</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask2pic\" type=\"file\" @change=\"handleTask1PhotoUpload\">\n                    <img id=\"photo1\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"col-8\">\n                    <div class=\"mb-3\">\n                        <label for=\"InputName\" class=\"form-label\">Подпись к фото</label>\n                        <input type=\"text\" class=\"form-control\" id=\"InputName\" v-model=\"picCap\">\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"InputTask2Task\" class=\"form-label\">Задание</label>\n                        <textarea rows=\"10\" class=\"form-control\" id=\"InputTask2Task\" v-model=\"task2\"></textarea>\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"InputTask2audio\" class=\"form-label\">Загрузите 5 аудио</label>\n                        <input class=\"form-control form-control-sm\" id=\"InputTask2audio\" type=\"file\" multiple @change=\"handleTask2AudioUpload\">\n                    </div>\n                </div>\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 3</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask3Task\" class=\"form-label\">Задание</label>\n                    <textarea rows=\"3\" class=\"form-control\" id=\"InputTask3Task\" v-model=\"task3\"></textarea>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask3audio\" class=\"form-label\">Загрузите 8 аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask3audio\" type=\"file\" multiple @change=\"handleTask3AudioUpload\">\n                </div>\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 4</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4Task\" class=\"form-label\">Задание</label>\n                    <textarea rows=\"9\" class=\"form-control\" id=\"InputTask4Task\" v-model=\"task4\"></textarea>\n                </div>\n                <div class=\"mb-3 col\">\n                    <label for=\"InputTask2pic\" class=\"form-label\">Загрузите фото</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask2pic\" type=\"file\" multiple @change=\"handleTask4PhotoUpload\">\n                    <img id=\"photo2\" src=\"\" class=\"img-fluid\">\n                    <img id=\"photo3\" src=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4audio\" class=\"form-label\">Загрузите аудио</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask4audio\" type=\"file\" @change=\"handleTask4AudioUpload\">\n                </div>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Добавить</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport Navbar from '../components/Navbar.vue'\nimport { v4 as uuidv4 } from \"uuid\"\n\nexport default {\n    name: 'addVariant',\n    data() {\n        return {\n            name: \"\",\n            task1: \"\",\n            text: \"\",\n            task1audio: null,\n            task2: \"\",\n            task2audio: null,\n            picCap: \"\",\n            task2pic: null,\n            task2q1: null,\n            task2q2: null,\n            task2q3: null,\n            task2q4: null,\n            task3: \"\",\n            task3audio: null,\n            task3start: null,\n            task3q1: null,\n            task3q2: null,\n            task3q3: null,\n            task3q4: null,\n            task3q5: null,\n            task3end: null,\n            task4: \"\",\n            task4audio: null,\n            task4pic1: null,\n            task4pic2: null,\n            tasks: {\n                task1: null,\n                task2: null,\n                task3: null,\n                task4: null,\n            },\n        }\n    },\n    components: {\n        Navbar,\n    },\n    methods: {\n        handleTask1PhotoUpload(e) {\n            this.task2pic = e.target.files[0];\n            let img = document.getElementById('photo1')\n            img.src = URL.createObjectURL(e.target.files[0])\n        },\n        handleTask4PhotoUpload(e) {\n            this.task4pic1 = e.target.files[0];\n            this.task4pic2 = e.target.files[1];\n            let img1 = document.getElementById('photo2')\n            let img2 = document.getElementById('photo3')\n            img1.src = URL.createObjectURL(e.target.files[0])\n            img2.src = URL.createObjectURL(e.target.files[1])\n        },\n        add() {\n            console.log('done');\n            let fileName = uuidv4() + '.png';\n            const formData = new FormData();\n            console.log(this.task2pic)\n            // let file = this.task2pic\n            formData.append('pic', this.task2pic, fileName)\n            console.log(fileName)\n            formData.append('task', this.task2)\n            formData.append('pic_caption', this.picCap)\n            console.log(formData)\n            console.log('Post API has received photo')\n            // console.log(response.data)\n            API.post('/task1/', {\n                task: this.task1,\n                text: this.text\n            }).then(response => {\n                console.log('task1', response.data)\n                this.tasks.task1 = response.data.id\n            }).catch(err => {\n                console.log(err)\n            })\n            console.log('csrftoken', localStorage.getItem('csrfToken'))\n            API.post('/task2/', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    'X-CSRFToken': localStorage.getItem('csrfToken')\n                },\n            }).then(response => {\n                console.log('task2', response.data)\n                this.tasks.task2 = response.data.id\n                console.log(this.tasks.task2)\n            }).catch(err => {\n                console.log(err)\n            })\n            API.post('/task3/', {\n                task: this.task3,\n            }).then(response => {\n                console.log('task3', response.data)\n                this.tasks.task3 = response.data.id\n            }).catch(err => {\n                console.log(err)\n            })\n            API.post('/task4/', {\n                task: this.task4,\n            }).then(response => {\n                console.log('task4', response.data)\n                this.tasks.task4 = response.data.id\n            }).catch(err => {\n                console.log(err)\n            })\n            console.log(this.tasks)\n            var all_tasks = true\n            var missing = []\n            for (let i in this.tasks) {\n                console.log(i.valueOf())\n                if (i.valueOf() == null) {\n                    all_tasks = false\n                    missing.push(i)\n                }\n            }\n            if (all_tasks) {\n                API.post('/variants/', {\n                    headers: {\n                        Authorization: `Bearer ${this.$store.state.accessToken}`\n                    },\n                    data: {\n                        name: this.name,\n                        task1: this.tasks.task1,\n                        task2: this.tasks.task2,\n                        task3: this.tasks.task3,\n                        task4: this.tasks.task4,\n                    }\n                }).then(response => {\n                    console.log('variant created', response.data)\n                }).catch(err => {\n                    console.log(err)\n                })\n            } else {\n                for (let i in missing) {\n                    console.log('Missing task', missing[i])\n                }\n            }\n            console.log('yes')\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":";AAiFA,SAASA,GAAE,QAAS,cAAa;AACjC,OAAOC,MAAK,MAAO,0BAAyB;AAC5C,SAASC,EAAC,IAAKC,MAAK,QAAS,MAAK;AAElC,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHD,IAAI,EAAE,EAAE;MACRE,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,EAAE;MACRC,UAAU,EAAE,IAAI;MAChBC,KAAK,EAAE,EAAE;MACTC,UAAU,EAAE,IAAI;MAChBC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,IAAI;MACdC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,KAAK,EAAE,EAAE;MACTC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE,IAAI;MAChBC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,EAAE;MACTC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,IAAI;MACfC,KAAK,EAAE;QACHxB,KAAK,EAAE,IAAI;QACXG,KAAK,EAAE,IAAI;QACXQ,KAAK,EAAE,IAAI;QACXS,KAAK,EAAE;MACX;IACJ;EACJ,CAAC;EACDK,UAAU,EAAE;IACR9B;EACJ,CAAC;EACD+B,OAAO,EAAE;IACLC,sBAAsBA,CAACC,CAAC,EAAE;MACtB,IAAI,CAACtB,QAAO,GAAIsB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MACjC,IAAIC,GAAE,GAAIC,QAAQ,CAACC,cAAc,CAAC,QAAQ;MAC1CF,GAAG,CAACG,GAAE,GAAIC,GAAG,CAACC,eAAe,CAACR,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACnD,CAAC;IACDO,sBAAsBA,CAACT,CAAC,EAAE;MACtB,IAAI,CAACN,SAAQ,GAAIM,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAI,CAACP,SAAQ,GAAIK,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIQ,IAAG,GAAIN,QAAQ,CAACC,cAAc,CAAC,QAAQ;MAC3C,IAAIM,IAAG,GAAIP,QAAQ,CAACC,cAAc,CAAC,QAAQ;MAC3CK,IAAI,CAACJ,GAAE,GAAIC,GAAG,CAACC,eAAe,CAACR,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAChDS,IAAI,CAACL,GAAE,GAAIC,GAAG,CAACC,eAAe,CAACR,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACpD,CAAC;IACDU,GAAGA,CAAA,EAAG;MACFC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnB,IAAIC,QAAO,GAAI9C,MAAM,EAAC,GAAI,MAAM;MAChC,MAAM+C,QAAO,GAAI,IAAIC,QAAQ,EAAE;MAC/BJ,OAAO,CAACC,GAAG,CAAC,IAAI,CAACpC,QAAQ;MACzB;MACAsC,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAE,IAAI,CAACxC,QAAQ,EAAEqC,QAAQ;MAC9CF,OAAO,CAACC,GAAG,CAACC,QAAQ;MACpBC,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC3C,KAAK;MAClCyC,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE,IAAI,CAACzC,MAAM;MAC1CoC,OAAO,CAACC,GAAG,CAACE,QAAQ;MACpBH,OAAO,CAACC,GAAG,CAAC,6BAA6B;MACzC;MACAhD,GAAG,CAACqD,IAAI,CAAC,SAAS,EAAE;QAChBC,IAAI,EAAE,IAAI,CAAChD,KAAK;QAChBC,IAAI,EAAE,IAAI,CAACA;MACf,CAAC,CAAC,CAACgD,IAAI,CAACC,QAAO,IAAK;QAChBT,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEQ,QAAQ,CAACnD,IAAI;QAClC,IAAI,CAACyB,KAAK,CAACxB,KAAI,GAAIkD,QAAQ,CAACnD,IAAI,CAACoD,EAAC;MACtC,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;QACZZ,OAAO,CAACC,GAAG,CAACW,GAAG;MACnB,CAAC;MACDZ,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEY,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MAC1D7D,GAAG,CAACqD,IAAI,CAAC,SAAS,EAAEH,QAAQ,EAAE;QAC1BY,OAAO,EAAE;UACL,cAAc,EAAE,qBAAqB;UACrC,aAAa,EAAEF,YAAY,CAACC,OAAO,CAAC,WAAW;QACnD;MACJ,CAAC,CAAC,CAACN,IAAI,CAACC,QAAO,IAAK;QAChBT,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEQ,QAAQ,CAACnD,IAAI;QAClC,IAAI,CAACyB,KAAK,CAACrB,KAAI,GAAI+C,QAAQ,CAACnD,IAAI,CAACoD,EAAC;QAClCV,OAAO,CAACC,GAAG,CAAC,IAAI,CAAClB,KAAK,CAACrB,KAAK;MAChC,CAAC,CAAC,CAACiD,KAAK,CAACC,GAAE,IAAK;QACZZ,OAAO,CAACC,GAAG,CAACW,GAAG;MACnB,CAAC;MACD3D,GAAG,CAACqD,IAAI,CAAC,SAAS,EAAE;QAChBC,IAAI,EAAE,IAAI,CAACrC;MACf,CAAC,CAAC,CAACsC,IAAI,CAACC,QAAO,IAAK;QAChBT,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEQ,QAAQ,CAACnD,IAAI;QAClC,IAAI,CAACyB,KAAK,CAACb,KAAI,GAAIuC,QAAQ,CAACnD,IAAI,CAACoD,EAAC;MACtC,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;QACZZ,OAAO,CAACC,GAAG,CAACW,GAAG;MACnB,CAAC;MACD3D,GAAG,CAACqD,IAAI,CAAC,SAAS,EAAE;QAChBC,IAAI,EAAE,IAAI,CAAC5B;MACf,CAAC,CAAC,CAAC6B,IAAI,CAACC,QAAO,IAAK;QAChBT,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEQ,QAAQ,CAACnD,IAAI;QAClC,IAAI,CAACyB,KAAK,CAACJ,KAAI,GAAI8B,QAAQ,CAACnD,IAAI,CAACoD,EAAC;MACtC,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;QACZZ,OAAO,CAACC,GAAG,CAACW,GAAG;MACnB,CAAC;MACDZ,OAAO,CAACC,GAAG,CAAC,IAAI,CAAClB,KAAK;MACtB,IAAIiC,SAAQ,GAAI,IAAG;MACnB,IAAIC,OAAM,GAAI,EAAC;MACf,KAAK,IAAIC,CAAA,IAAK,IAAI,CAACnC,KAAK,EAAE;QACtBiB,OAAO,CAACC,GAAG,CAACiB,CAAC,CAACC,OAAO,EAAE;QACvB,IAAID,CAAC,CAACC,OAAO,EAAC,IAAK,IAAI,EAAE;UACrBH,SAAQ,GAAI,KAAI;UAChBC,OAAO,CAACG,IAAI,CAACF,CAAC;QAClB;MACJ;MACA,IAAIF,SAAS,EAAE;QACX/D,GAAG,CAACqD,IAAI,CAAC,YAAY,EAAE;UACnBS,OAAO,EAAE;YACLM,aAAa,EAAG,UAAS,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,WAAY;UAC3D,CAAC;UACDlE,IAAI,EAAE;YACFD,IAAI,EAAE,IAAI,CAACA,IAAI;YACfE,KAAK,EAAE,IAAI,CAACwB,KAAK,CAACxB,KAAK;YACvBG,KAAK,EAAE,IAAI,CAACqB,KAAK,CAACrB,KAAK;YACvBQ,KAAK,EAAE,IAAI,CAACa,KAAK,CAACb,KAAK;YACvBS,KAAK,EAAE,IAAI,CAACI,KAAK,CAACJ;UACtB;QACJ,CAAC,CAAC,CAAC6B,IAAI,CAACC,QAAO,IAAK;UAChBT,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEQ,QAAQ,CAACnD,IAAI;QAChD,CAAC,CAAC,CAACqD,KAAK,CAACC,GAAE,IAAK;UACZZ,OAAO,CAACC,GAAG,CAACW,GAAG;QACnB,CAAC;MACL,OAAO;QACH,KAAK,IAAIM,CAAA,IAAKD,OAAO,EAAE;UACnBjB,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEgB,OAAO,CAACC,CAAC,CAAC;QAC1C;MACJ;MACAlB,OAAO,CAACC,GAAG,CAAC,KAAK;IACrB;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}