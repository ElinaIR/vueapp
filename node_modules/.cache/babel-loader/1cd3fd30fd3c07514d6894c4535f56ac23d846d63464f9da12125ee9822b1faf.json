{"ast":null,"code":"import axios from \"axios\";\nconst API = axios.create({\n  baseURL: 'http://127.0.0.1:8000/api/v1'\n});\nlet token = document.getElementsByName(\"csrfmiddlewaretoken\");\nif (token) {\n  API.defaults.headers.common['X-CSRFToken'] = token[0].value;\n} else {\n  console.error('CSRF token not found');\n}\nAPI.interceptors.response.use(response => response, async err => {\n  if (err.response.status === 401) {\n    this.$store.dispatch('refreshToken', {\n      refreshToken: this.$store.state.refreshToken\n    }).then(() => {\n      return API(err.config);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n});\nexport { API };","map":{"version":3,"names":["axios","API","create","baseURL","token","document","getElementsByName","defaults","headers","common","value","console","error","interceptors","response","use","err","status","$store","dispatch","refreshToken","state","then","config","catch","log"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/axios-api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API = axios.create({\n    baseURL: 'http://127.0.0.1:8000/api/v1',\n})\n\nlet token = document.getElementsByName(\"csrfmiddlewaretoken\")\n\nif (token) {\n    API.defaults.headers.common['X-CSRFToken'] = token[0].value\n}\nelse {\n    console.error('CSRF token not found')\n}\n\nAPI.interceptors.response.use(response => response, async err => {\n    if (err.response.status === 401) {\n        this.$store.dispatch('refreshToken', {\n            refreshToken: this.$store.state.refreshToken\n        }).then(() => {\n            return API(err.config)\n        }).catch(err => {\n            console.log(err)\n        })\n    }\n})\n\nexport { API }"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACrBC,OAAO,EAAE;AACb,CAAC,CAAC;AAEF,IAAIC,KAAK,GAAGC,QAAQ,CAACC,iBAAiB,CAAC,qBAAqB,CAAC;AAE7D,IAAIF,KAAK,EAAE;EACPH,GAAG,CAACM,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,aAAa,CAAC,GAAGL,KAAK,CAAC,CAAC,CAAC,CAACM,KAAK;AAC/D,CAAC,MACI;EACDC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAC;AACzC;AAEAX,GAAG,CAACY,YAAY,CAACC,QAAQ,CAACC,GAAG,CAACD,QAAQ,IAAIA,QAAQ,EAAE,MAAME,GAAG,IAAI;EAC7D,IAAIA,GAAG,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IAC7B,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,cAAc,EAAE;MACjCC,YAAY,EAAE,IAAI,CAACF,MAAM,CAACG,KAAK,CAACD;IACpC,CAAC,CAAC,CAACE,IAAI,CAAC,MAAM;MACV,OAAOrB,GAAG,CAACe,GAAG,CAACO,MAAM,CAAC;IAC1B,CAAC,CAAC,CAACC,KAAK,CAACR,GAAG,IAAI;MACZL,OAAO,CAACc,GAAG,CAACT,GAAG,CAAC;IACpB,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AAEF,SAASf,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}