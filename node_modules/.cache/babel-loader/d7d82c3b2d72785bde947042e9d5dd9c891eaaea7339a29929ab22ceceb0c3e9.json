{"ast":null,"code":"import { API } from '../axios-api';\nimport Navbar from '../components/Navbar.vue';\nimport { v4 as uuidv4 } from \"uuid\";\nexport default {\n  name: 'addVariant',\n  data() {\n    return {\n      name: \"\",\n      task1: \"\",\n      text: \"\",\n      task21: \"\",\n      task2pic: \"\",\n      task2point: [],\n      task22: \"\",\n      task3: \"\",\n      task41: \"\",\n      task4point: [],\n      task42: \"\",\n      tasks: {\n        task1: null,\n        task2: null,\n        task3: null,\n        task4: null\n      }\n    };\n  },\n  components: {\n    Navbar\n  },\n  methods: {\n    handleFileUpload() {\n      this.task2pic = this.$refs.file.files[0].value;\n    },\n    add() {\n      console.log('done');\n      let fileName = uuidv4();\n      let formData = new FormData();\n      formData.append('task2pic', this.task2pic, fileName);\n      API.post('/media/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        console.log('Post API has received photo');\n        console.log(response.data);\n        API.post('/task1/', {\n          task: this.task1,\n          text: this.text\n        }).then(response => {\n          console.log('task1', response.data);\n          this.tasks.task1 = response.data.id;\n        }).catch(err => {\n          console.log(err);\n        });\n        API.post('/task2/', {\n          task: this.task21,\n          pic: `/media/${fileName}.jpg`,\n          point1: this.task2point[1],\n          point2: this.task2point[2],\n          point3: this.task2point[3],\n          point4: this.task2point[4],\n          more_task: this.task22\n        }).then(response => {\n          console.log('task2', response.data);\n          this.tasks.task2 = response.data.id;\n        }).catch(err => {\n          console.log(err);\n        });\n        API.post('/task3/', {\n          task: this.task3\n        }).then(response => {\n          console.log('task3', response.data);\n          this.tasks.task3 = response.data.id;\n        }).catch(err => {\n          console.log(err);\n        });\n        API.post('/task4/', {\n          task: this.task41,\n          point1: this.task4point[1],\n          point2: this.task4point[2],\n          point3: this.task4point[3],\n          point4: this.task4point[4],\n          more_task: this.task42\n        }).then(response => {\n          console.log('task4', response.data);\n          this.tasks.task4 = response.data.id;\n        }).catch(err => {\n          console.log(err);\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n      var all_tasks = true;\n      var missing = [];\n      for (let i in this.tasks) {\n        if (this.tasks[i] == null) {\n          all_tasks = false;\n          missing.append(i);\n        }\n      }\n      if (all_tasks) {\n        API.post('/variants', {\n          name: this.name,\n          task1: this.tasks.task1,\n          task2: this.tasks.task2,\n          task3: this.tasks.task3,\n          task4: this.tasks.task4\n        }).then(response => {\n          console.log('variant created', response.data);\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        for (let i in missing) {\n          console.log('Missing task', missing[i] + 1);\n        }\n      }\n      console.log('yes');\n    }\n  }\n};","map":{"version":3,"names":["API","Navbar","v4","uuidv4","name","data","task1","text","task21","task2pic","task2point","task22","task3","task41","task4point","task42","tasks","task2","task4","components","methods","handleFileUpload","$refs","file","files","value","add","console","log","fileName","formData","FormData","append","post","headers","then","response","task","id","catch","err","pic","point1","point2","point3","point4","more_task","all_tasks","missing","i"],"sources":["/Users/elinaigdavletova/Documents/Интернет_программирование/GQW/frontend/vueapp/src/views/addVariant.vue"],"sourcesContent":["<template>\n    <Navbar></Navbar>\n    <div class=\"container p-5\">\n        <form class=\"p-3 bg-light border border-3 rounded-3\" @submit.prevent=\"add()\">\n            <div class=\"mb-3\">\n                <label for=\"InputName\" class=\"form-label\">Название варианта</label>\n                <input type=\"text\" class=\"form-control\" id=\"InputName\" v-model=\"name\">\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 1</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask1Task\" class=\"form-label\">Задание</label>\n                    <textarea class=\"form-control\" id=\"InputTask1Task\" v-model=\"task1\"></textarea>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputText\" class=\"form-label\">Текст</label>\n                    <textarea class=\"form-control\" id=\"InputText\" v-model=\"text\"></textarea>\n                </div>\n            </div>\n            <div class=\"border-top border-3 row\">\n                <h5 class=\"mt-2\">Задание 2</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask2Task\" class=\"form-label\">Задание</label>\n                    <textarea class=\"form-control\" id=\"InputTask2Task\" v-model=\"task21\"></textarea>\n                </div>\n                <div class=\"mb-3 col-6\">\n                    <label for=\"InputTask2pic\" class=\"form-label\">Загрузите фото</label>\n                    <input class=\"form-control form-control-sm\" id=\"InputTask2pic\" type=\"file\" @change=\"handleFileUpload()\">\n                </div>\n                <div class=\"mb-3 col-6\">\n                    <div v-for=\"i in 4\" :key=\"i\">\n                        <label for=\"InputTask2Point + {{ i }}\" class=\"form-label\">Пункт {{ i }}</label>\n                        <input type=\"text\" class=\"form-control\" id=\"InputTask2Point + {{ i }}\" v-model=\"task2point[i]\">\n                    </div>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask2Task2\" class=\"form-label\">Задание</label>\n                    <textarea class=\"form-control\" id=\"InputTask2Task2\" v-model=\"task22\"></textarea>\n                </div>\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 3</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask3Task\" class=\"form-label\">Задание</label>\n                    <textarea class=\"form-control\" id=\"InputTask3Task\" v-model=\"task3\"></textarea>\n                </div>\n            </div>\n            <div class=\"border-top border-3\">\n                <h5 class=\"mt-2\">Задание 4</h5>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4Task\" class=\"form-label\">Задание</label>\n                    <textarea class=\"form-control\" id=\"InputTask4Task\" v-model=\"task41\"></textarea>\n                </div>\n                <div class=\"mb-3\">\n                    <div v-for=\"i in 4\" :key=\"i\">\n                        <label for=\"InputTask4Point + {{ i }}\" class=\"form-label\">Пункт {{ i }}</label>\n                        <input type=\"text\" class=\"form-control\" id=\"InputTask4Point + {{ i }}\" v-model=\"task4point[i]\">\n                    </div>\n                </div>\n                <div class=\"mb-3\">\n                    <label for=\"InputTask4Task2\" class=\"form-label\">Задание</label>\n                    <textarea class=\"form-control\" id=\"InputTask4Task2\" v-model=\"task42\"></textarea>\n                </div>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Добавить</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { API } from '../axios-api'\nimport Navbar from '../components/Navbar.vue'\nimport { v4 as uuidv4 } from \"uuid\"\n\nexport default {\n    name: 'addVariant',\n    data() {\n        return {\n            name: \"\",\n            task1: \"\",\n            text: \"\",\n            task21: \"\",\n            task2pic: \"\",\n            task2point: [],\n            task22: \"\",\n            task3: \"\",\n            task41: \"\",\n            task4point: [],\n            task42: \"\",\n            tasks: {\n                task1: null,\n                task2: null,\n                task3: null,\n                task4: null,\n            },\n        }\n    },\n    components: {\n        Navbar,\n    },\n    methods: {\n        handleFileUpload() {\n            this.task2pic = this.$refs.file.files[0].value;\n        },\n        add() {\n            console.log('done');\n            let fileName = uuidv4();\n            let formData = new FormData();\n            formData.append('task2pic', this.task2pic, fileName);\n            API.post('/media/', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            }).then(response => {\n                    console.log('Post API has received photo')\n                    console.log(response.data)\n                    API.post('/task1/', {\n                        task: this.task1,\n                        text: this.text\n                    }).then(response => {\n                        console.log('task1', response.data)\n                        this.tasks.task1 = response.data.id\n                    }).catch(err => {\n                        console.log(err)\n                    })\n                    API.post('/task2/', {\n                        task: this.task21,\n                        pic: `/media/${fileName}.jpg`,\n                        point1: this.task2point[1],\n                        point2: this.task2point[2],\n                        point3: this.task2point[3],\n                        point4: this.task2point[4],\n                        more_task: this.task22\n                    }).then(response => {\n                        console.log('task2', response.data)\n                        this.tasks.task2 = response.data.id\n                    }).catch(err => {\n                        console.log(err)\n                    })\n                    API.post('/task3/', {\n                        task: this.task3,\n                    }).then(response => {\n                        console.log('task3', response.data)\n                        this.tasks.task3 = response.data.id\n                    }).catch(err => {\n                        console.log(err)\n                    })\n                    API.post('/task4/', {\n                        task: this.task41,\n                        point1: this.task4point[1],\n                        point2: this.task4point[2],\n                        point3: this.task4point[3],\n                        point4: this.task4point[4],\n                        more_task: this.task42\n                    }).then(response => {\n                        console.log('task4', response.data)\n                        this.tasks.task4 = response.data.id\n                    }).catch(err => {\n                        console.log(err)\n                    })\n                }).catch(err => {\n                    console.log(err)\n                })\n            var all_tasks = true\n            var missing = []\n            for (let i in this.tasks) {\n                if (this.tasks[i] == null) {\n                    all_tasks = false\n                    missing.append(i)\n                }\n            }\n            if (all_tasks) {\n                API.post('/variants', {\n                    name: this.name,\n                    task1: this.tasks.task1,\n                    task2: this.tasks.task2,\n                    task3: this.tasks.task3,\n                    task4: this.tasks.task4,\n                }).then(response => {\n                    console.log('variant created', response.data)\n                }).catch(err => {\n                    console.log(err)\n                })\n            } else {\n                for (let i in missing) {\n                    console.log('Missing task', missing[i] + 1)\n                }\n            }\n            console.log('yes')\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}